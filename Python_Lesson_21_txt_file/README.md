README.md

with語句

如果要確保即便發生錯誤時文件也將被關閉，可使用with語句。
with語句允許使用所謂的上下文管理器。
上下文管理器是支持兩個方法的對象：__enter__和__exit__
方法__enter__：不接受任何參數，在進入with語句時被調用，其返回值被賦給關鍵字as後面的變量。
方法__exit__：接受三個參數，異常類型、異常對象和異常跟蹤。它在離開方法時被調用（通過前述參數將引發的異常提供給它）。如果__exit__返回False，將抑制所有的異常。
文件可用作上下文管理器，它們的方法__enter__返回文件對象本身，而方法__exit__關閉文件。

with語句讓你能夠打開文件並將其賦給一個變量。在語句體中，可將數據寫入文件（還可能做其他事情）。到達該語句末尾時，將自動關閉文件，即便出現異常亦如此。

with open('somefile.txt') as somefile:
    do_something(somefile)


關閉文件：方法close
要確保文件得以關閉，可使用一條try/finally語句，並在finally子句中調用close，但是使用with語句更方便。

try:
    #將數據寫入到文件中
finally:
    file.close()

需要將文件關閉，因為：
通常，程序退出時將自動關閉文件對象（也可能在退出程序前這樣做），因此是否將讀取的文件關閉並不那麼重要。然而，關閉文件沒有壞處，在有些操作系統和設置中，還可避免無意義地鎖定文件以防修改。另外，這樣做還可避免用完系統可指定的文件打開配額。
對於寫入過的文件，一定要將其關閉，因為Python可能緩衝你寫入的數據（將數據暫時存儲在某個地方，以提高效率）。因此如果程序因某種原因崩潰，數據可能根本不會寫入到文件中。安全的做法是，使用完文件後就將其關閉。
如果要重置緩衝，讓所做的修改反映到磁盤文件中，但又不想關閉文件，可使用方法flush。然而，需要注意的是，根據使用的操作系統和設置，flush可能出於鎖定考慮而禁止其他正在運行的程序訪問這個文件。只要能夠方便地關閉文件，就應將其關閉。


內置函數open：打開文件並返回一個文件對象

open(name, mode, …)

函數open將指定的文件作為唯一必不可少的參數，並返回一個文件對象，如果指定的文件不存在，將發生異常。
默認模式為‘rt’，這意味著將把文件視為經過編碼的Unicode文本，因此將自動執行解碼和編碼，且默認使用UTF-8編碼。
如果只指定文件名，將獲得一個可讀取的文件對象。如果要寫入文件，必須通過指定模式來顯式地指出這一點，獨佔寫入模式與寫入模式的區別是在文件已存在時引發FileExistsError異常。
默認情況下，行以'\n'結尾。讀取時將自動替換其他行尾字符（'\r'或'\r\n'）；寫入時將'\n'替換為系統默認行尾字符（os.lineseq）。
encoding關鍵字參數：指定其他編碼（默認使用UTF-8編碼）。
errors關鍵字參數：Unicode錯誤處理策略
newline關鍵字參數：在Python使用通用換行模式情況下，readlines等方法能夠識別所有合法的換行符（'\n'、'\r'和'\r\n'）。如果要使用這種模式，同時禁止自動換行，可將關鍵字參數newline設置為空字符串，如open(name, newline='')。如果要指定只將'\r'或'\r\n'視為合法的行尾字符，可將參數newline設置為相應的行尾字符。這樣，讀取時不會對行尾字符進行轉換，但寫入時將把'\n'替換為指定的行尾字符。
還有幾個更為高級的可選參數，用於控制緩衝以及更直接地處理文件描述符。

函數open的參數mode的可能取值有多個，下面是函數open的參數mode的最常見取值：
't'     文本模式（默認值，與其他模式結合使用）
'r'     讀取模式（默認值），顯式地指定讀取模式的效果與根本不指定模式相同
'w'     寫入模式能夠寫入文件，並在文件不存在時創建它。在打開文件時，既有內容將被刪除（截斷），並從文件開頭處開始寫入
'a'     附加模式，如果要在既有文件末尾繼續寫入，可使用附加模式
'+'     讀寫模式（與其他模式結合使用），表示既可讀取也可寫入，'r+'和'w+'之間的差別：'r+'不會刪除文件，'w+'會刪除文件
'b'     二進制模式（與其他模式結合使用）。如果文件包含非文本的二進制數據，如聲音剪輯片段或圖像，只用二進制模式（如'rb'）來禁用與文本相關的功能。通過在模式後面加上'b'，可將文件作為二進制文件打開，並關閉Unicode編碼和換行符替換


讀取文件的方法：read

如果有一個名為f的類似於文件的對象，可使用f.read來讀取數據。
可以指定要讀取多少個字符，也可以讀取文件中餘下的全部內容（不指定要讀取多少字符）。
在二進制模式下是多少字節。


寫入文件的方法：write

如果有一個名為f的類似於文件的對象，可使用f.write來寫入數據。
在文本和二進制模式下，基本上分別將str和bytes類用作數據。
每當調用f.write(string)時，提供的字符串都將寫入到文件中既有內容的後面。


方法seek：將當前位置（執行讀取或寫入的位置）移到offset和whence指定的地方

seek(offset, whence)

參數offset指定了字節（字符）數
參數whence默認為io.SEEK_SET(0)，這意味著偏移量是相對於文件開頭的（偏移量不能為負數）
參數whence設置為io.SEEK_CUR(1)，表示相對於當前位置進行移動（偏移量可以為負）
參數whence設置為io.SEEK_END(2)，表示相對於文件末尾進行移動


方法tell：返回當前位於文件的什麼位置


方法readline：讀取行
從當前位置到下一個分行符的文本，調用這個方法時，可不提供任何參數（在這種情況下，將讀取一行並返回它）；也可提供一個非負整數，指定readline最多可讀取多少個字符。


方法readlines：讀取文件中的所有行，並以列表的方式返回它們


方法writelines：寫入行
方法writelines接受一個字符串列表（實際上，可以是任何序列或可迭代對象），並將這些字符串都寫入到文件（或流）中。
寫入時不會添加換行符，因此必須自行添加。
沒有方法writeline，因為可以使用write。


最常見的迭代文件內容的方法：文件迭代器
迭代文件內容的方法很多，其中最常見的是迭代文本文件中的行，這可簡單地對文件本身進行迭代來做到。
文件實際上是可迭代的，這意味著可在for循環中直接使用它們來迭代行。